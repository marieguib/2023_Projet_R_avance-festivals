---
title: "Margaux"
author: "Margaux Bailleul"
date: "2023-04-20"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(sf)
```


```{r}
df_festivals <- read.csv("donnees_festivals.csv", sep=";")
```

Carte

```{r}
dpt <- read_sf("dpt")
```


```{r}
freq <- table(df_festivals$departement)

# Créer un dataframe avec les fréquences de chaque région
df_depart <- data.frame(table(df_festivals$departement)) |> 
  rename(ID_GEOFLA = Var1, Frequence = Freq)|> 
  mutate(Pourcentage = round(Frequence / sum(Frequence) * 100, 1)) |> 
  arrange(-Frequence) # on trie selon le nombre de festivals dans la région
head(df_depart,3)
df_depart
```

```{r}
france_map_count <- merge(dpt, df_depart, by = "ID_GEOFLA", all.x = TRUE)
france_map_count
```



```{r}
ggplot(france_map_count) + geom_sf(aes(fill=Frequence)) +
  scale_fill_continuous(low="yellow",high="red")+theme_void()
```




